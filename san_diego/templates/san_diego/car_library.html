{% extends 'san_diego/base.html' %}
{% load static %}

{% block title %}Cars{% endblock %}

{% block content %}
    <div class='container'>
        <div class='row justify-content-end'>
            <div class='col-4 mt-4 mb-3'>
                {% if is_paginated %}
                    {% include "san_diego/pagination.html" %}
                {% endif %}
            </div>
            <div class='col-4 mt-4 mb-4'>
                <form method='GET'>
                    <div class="input-group">
                        <input type="text" name='q' class="form-control" placeholder="Search" value='{{ request.GET.q }}'>
                    </div>
                </form>
            </div>
        </div>

        <div class='table-responsive'>
            <table class="table table-striped table-hover">
                <thead>
                  <tr>
                    <th scope="col">#</th>
                    <th scope="col">Client</th>
                    <th scope="col">Make</th>
                    <th scope="col">Model</th>
                    <th scope="col">Added</th>
                    <th scope="col">Updated</th>
                    <th scope="col"><a href="{% url 'car_add' %}" role='button' class='text-success'><i class="fas fa-plus"></i> Add Car</a></th>
                  </tr>
                </thead>
                <tbody>
                    {% for car in cars %}
                        <tr>
                            <th scope="row"><a href="{{car.uuid}}">{{forloop.counter}}</a></th>
                            <td><a href="{% url 'client_detail' car.client.uuid %}">{{ car.client }}</a></td>
                            <td>{{ car.car_make }}</td>
                            <td>{{ car.car_model }}</td>
                            <td>{{ car.date_added|date:"d M Y" }}</td>
                            <td>{{ car.date_updated|date:"d M Y H:i" }}</td>
                            <td>
                                <div class="btn-group dropleft">
                                    <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
                                      Action
                                    </button>
                                    <div class="dropdown-menu">
                                      <a class="dropdown-item" href="{{ car.uuid }}/edit">Edit</a>
                                      <a class="dropdown-item" href="{{ car.uuid }}/add_service">Add service</a>
                                      <a class="dropdown-item" href="{{ car.uuid }}/service_history">View service history</a>
                                      <div class="dropdown-divider"></div>
                                      <a class="dropdown-item" style='background-color: red;' href="{{ car.uuid }}/delete">Delete</a>
                                    </div>
                                  </div>
                            </td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>

        <div class='row justify-content-center'>
            <div class='col-4 mt-4 mb-3'>
                {% if is_paginated %}
                    {% include "san_diego/pagination.html" %}
                {% endif %}
            </div>
        </div>
    </div>
<!-- <script src="/docs/5.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script> -->
{% endblock %}